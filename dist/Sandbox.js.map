{"version":3,"file":"Sandbox.js","sources":["../src/eval.ts","../src/Sandbox.ts"],"sourcesContent":["import { createFunction, createFunctionAsync, currentTicks } from './executor.js';\nimport parse, { lispifyFunction } from './parser.js';\nimport { IExecContext, Ticks } from './utils.js';\n\nexport interface IEvalContext {\n  sandboxFunction: typeof sandboxFunction;\n  sandboxAsyncFunction: typeof sandboxAsyncFunction;\n  sandboxedEval: typeof sandboxedEval;\n  sandboxedSetTimeout: typeof sandboxedSetTimeout;\n  sandboxedSetInterval: typeof sandboxedSetInterval;\n  sandboxedClearTimeout: typeof sandboxedClearTimeout;\n  sandboxedClearInterval: typeof sandboxedClearInterval;\n  lispifyFunction: typeof lispifyFunction;\n}\nexport type SandboxFunction = (code: string, ...args: string[]) => () => unknown;\nexport type SandboxEval = (code: string) => unknown;\nexport type SandboxSetTimeout = (\n  handler: TimerHandler,\n  timeout?: number,\n  ...args: unknown[]\n) => any;\nexport type SandboxSetInterval = (\n  handler: TimerHandler,\n  timeout?: number,\n  ...args: unknown[]\n) => any;\nexport type SandboxClearTimeout = (handle: number) => void;\nexport type SandboxClearInterval = (handle: number) => void;\n\nexport function createEvalContext(): IEvalContext {\n  return {\n    sandboxFunction,\n    sandboxAsyncFunction,\n    sandboxedEval,\n    sandboxedSetTimeout,\n    sandboxedSetInterval,\n    sandboxedClearTimeout,\n    sandboxedClearInterval,\n    lispifyFunction,\n  };\n}\n\nexport function sandboxFunction(context: IExecContext, ticks?: Ticks): SandboxFunction {\n  return SandboxFunction;\n  function SandboxFunction(...params: string[]) {\n    const code = params.pop() || '';\n    const parsed = parse(code);\n    return createFunction(\n      params,\n      parsed.tree,\n      ticks || currentTicks.current,\n      {\n        ...context,\n        constants: parsed.constants,\n        tree: parsed.tree,\n      },\n      undefined,\n      'anonymous',\n    );\n  }\n}\n\nexport type SandboxAsyncFunction = (code: string, ...args: string[]) => () => Promise<unknown>;\nexport function sandboxAsyncFunction(context: IExecContext, ticks?: Ticks): SandboxAsyncFunction {\n  return SandboxAsyncFunction;\n  function SandboxAsyncFunction(...params: string[]) {\n    const code = params.pop() || '';\n    const parsed = parse(code);\n    return createFunctionAsync(\n      params,\n      parsed.tree,\n      ticks || currentTicks.current,\n      {\n        ...context,\n        constants: parsed.constants,\n        tree: parsed.tree,\n      },\n      undefined,\n      'anonymous',\n    );\n  }\n}\n\nexport function sandboxedEval(func: SandboxFunction): SandboxEval {\n  return sandboxEval;\n  function sandboxEval(code: string) {\n    return func(code)();\n  }\n}\n\nexport function sandboxedSetTimeout(\n  func: SandboxFunction,\n  context: IExecContext,\n): SandboxSetTimeout {\n  return function sandboxSetTimeout(handler, timeout, ...args) {\n    const sandbox = context.ctx.sandbox;\n    const exec = (...a: any[]) => {\n      const h = typeof handler === 'string' ? func(handler) : handler;\n      haltsub.unsubscribe();\n      contsub.unsubscribe();\n      return h(...a);\n    };\n\n    const sandBoxhandle = ++sandbox.timeoutHandleCounter;\n\n    let start = Date.now();\n    let handle: any = setTimeout(exec, timeout, ...args);\n    sandbox.setTimeoutHandles.set(sandBoxhandle, handle);\n\n    let elapsed = 0;\n    const haltsub = sandbox.subscribeHalt(() => {\n      elapsed = Date.now() - start + elapsed;\n      clearTimeout(handle);\n    });\n    const contsub = sandbox.subscribeResume(() => {\n      start = Date.now();\n      const remaining = Math.floor((timeout || 0) - elapsed);\n      handle = setTimeout(exec, remaining, ...args);\n      sandbox.setTimeoutHandles.set(sandBoxhandle, handle);\n    });\n    return sandBoxhandle;\n  };\n}\n\nexport function sandboxedClearTimeout(context: IExecContext): SandboxClearTimeout {\n  return function sandboxClearTimeout(handle: number) {\n    const sandbox = context.ctx.sandbox;\n    const timeoutHandle = sandbox.setTimeoutHandles.get(handle);\n    if (timeoutHandle) {\n      clearTimeout(timeoutHandle);\n      sandbox.setTimeoutHandles.delete(handle);\n    }\n  };\n}\nexport function sandboxedClearInterval(context: IExecContext): SandboxClearInterval {\n  return function sandboxClearInterval(handle: number) {\n    const sandbox = context.ctx.sandbox;\n    const intervalHandle = sandbox.setIntervalHandles.get(handle);\n    if (intervalHandle) {\n      clearInterval(intervalHandle.handle);\n      sandbox.setIntervalHandles.delete(handle);\n      intervalHandle.haltsub.unsubscribe();\n      intervalHandle.contsub.unsubscribe();\n    }\n  };\n}\n\nexport function sandboxedSetInterval(\n  func: SandboxFunction,\n  context: IExecContext,\n): SandboxSetInterval {\n  return function sandboxSetInterval(handler, timeout, ...args) {\n    const sandbox = context.ctx.sandbox;\n    const h = typeof handler === 'string' ? func(handler) : handler;\n    const exec = (...a: any[]) => {\n      start = Date.now();\n      elapsed = 0;\n      return h(...a);\n    };\n\n    const sandBoxhandle = ++sandbox.timeoutHandleCounter;\n\n    let start = Date.now();\n    let handle: any = setInterval(exec, timeout, ...args);\n\n    let elapsed = 0;\n    const haltsub = sandbox.subscribeHalt(() => {\n      elapsed = Date.now() - start + elapsed;\n      clearInterval(handle);\n    });\n    const contsub = sandbox.subscribeResume(() => {\n      start = Date.now();\n      handle = setTimeout(\n        () => {\n          start = Date.now();\n          elapsed = 0;\n          handle = setInterval(exec, timeout, ...args);\n          exec(...args);\n        },\n        Math.floor((timeout || 0) - elapsed),\n        ...args,\n      );\n      handlObj.handle = handle;\n    });\n\n    const handlObj = {\n      handle,\n      haltsub,\n      contsub,\n    };\n    sandbox.setIntervalHandles.set(sandBoxhandle, handlObj);\n    return sandBoxhandle;\n  };\n}\n","import { createExecContext, IExecContext, IOptionParams, IScope } from './utils.js';\nimport { createEvalContext } from './eval.js';\nimport { ExecReturn } from './executor.js';\nimport parse from './parser.js';\nimport SandboxExec from './SandboxExec.js';\nexport {\n  LocalScope,\n  SandboxExecutionTreeError,\n  SandboxCapabilityError,\n  SandboxAccessError,\n  SandboxError,\n} from './utils.js';\n\nexport default class Sandbox extends SandboxExec {\n  constructor(options?: IOptionParams) {\n    super(options, createEvalContext());\n  }\n\n  static audit<T>(code: string, scopes: IScope[] = []): ExecReturn<T> {\n    const globals: Record<string, unknown> = {};\n    for (const i of Object.getOwnPropertyNames(globalThis) as [keyof typeof globalThis]) {\n      globals[i] = globalThis[i];\n    }\n    const sandbox = new SandboxExec({\n      globals,\n      audit: true,\n    });\n    return sandbox.executeTree(\n      createExecContext(sandbox, parse(code, true), createEvalContext()),\n      scopes,\n    );\n  }\n\n  static parse(code: string) {\n    return parse(code);\n  }\n\n  compile<T>(\n    code: string,\n    optimize = false,\n  ): (...scopes: IScope[]) => { context: IExecContext; run: () => T } {\n    const parsed = parse(code, optimize);\n    const exec = (...scopes: IScope[]) => {\n      const context = createExecContext(this, parsed, this.evalContext);\n      return { context, run: () => this.executeTree<T>(context, [...scopes]).result };\n    };\n    return exec;\n  }\n\n  compileAsync<T>(\n    code: string,\n    optimize = false,\n  ): (...scopes: IScope[]) => { context: IExecContext; run: () => Promise<T> } {\n    const parsed = parse(code, optimize);\n    const exec = (...scopes: IScope[]) => {\n      const context = createExecContext(this, parsed, this.evalContext);\n      return {\n        context,\n        run: () => this.executeTreeAsync<T>(context, [...scopes]).then((ret) => ret.result),\n      };\n    };\n    return exec;\n  }\n\n  compileExpression<T>(\n    code: string,\n    optimize = false,\n  ): (...scopes: IScope[]) => { context: IExecContext; run: () => T } {\n    const parsed = parse(code, optimize, true);\n    const exec = (...scopes: IScope[]) => {\n      const context = createExecContext(this, parsed, this.evalContext);\n      return { context, run: () => this.executeTree<T>(context, [...scopes]).result };\n    };\n    return exec;\n  }\n\n  compileExpressionAsync<T>(\n    code: string,\n    optimize = false,\n  ): (...scopes: IScope[]) => { context: IExecContext; run: () => Promise<T> } {\n    const parsed = parse(code, optimize, true);\n    const exec = (...scopes: IScope[]) => {\n      const context = createExecContext(this, parsed, this.evalContext);\n      return {\n        context,\n        run: () => this.executeTreeAsync<T>(context, [...scopes]).then((ret) => ret.result),\n      };\n    };\n    return exec;\n  }\n}\n"],"names":[],"mappings":"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"}